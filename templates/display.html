<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Translation</title>
    <style>
        body {
            font-size: 50px;
            text-align: center;
            background: black;
            color: white;
            padding: 50px;
            overflow: hidden;
        }
        #translation-container {
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        .translation-line {
            margin: 10px 0;
        }
        .partial-text {
            color: yellow; /* Show partial translations in yellow */
            font-style: italic;
        }
    </style>
    <script>
        function updateText() {
            fetch('/text')
                .then(response => response.json())
                .then(data => {
                    let container = document.getElementById("translation-container");
                    container.innerHTML = ""; // Clear old content

                    // Display finalized translations
                    data.history.forEach(text => {
                        let line = document.createElement("div");
                        line.className = "translation-line";
                        line.innerText = text;
                        container.appendChild(line);
                    });

                    // Display ongoing partial speech in yellow (Spanish translation of partial)
                    if (data.partial) {
                        let partialLine = document.createElement("div");
                        partialLine.className = "partial-text translation-line";
                        partialLine.innerText = data.partial;
                        container.appendChild(partialLine);
                    }

                    // Auto-scroll to latest translation
                    container.scrollTop = container.scrollHeight;
                });
        }
        setInterval(updateText, 1000);  // Refresh every 0.5 seconds or 500 ms
    </script>
</head>
<body>
    <div id="translation-container"></div>
</body>
</html>
